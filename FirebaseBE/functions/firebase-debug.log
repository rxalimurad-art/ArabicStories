[debug] [2026-02-28T21:48:12.259Z] ----------------------------------------------------------------------
[debug] [2026-02-28T21:48:12.261Z] Command:       /usr/local/bin/node /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/.bin/firebase emulators:start --only functions --project demo-arabic-stories
[debug] [2026-02-28T21:48:12.261Z] CLI Version:   13.35.1
[debug] [2026-02-28T21:48:12.261Z] Platform:      darwin
[debug] [2026-02-28T21:48:12.261Z] Node Version:  v24.13.1
[debug] [2026-02-28T21:48:12.261Z] Time:          Sun Mar 01 2026 02:48:12 GMT+0500 (Pakistan Standard Time)
[debug] [2026-02-28T21:48:12.261Z] ----------------------------------------------------------------------
[debug] 
[debug] [2026-02-28T21:48:12.339Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] Failed to authenticate, have you run firebase login?
[warn] ⚠  emulators: You are not currently authenticated so some features may not work correctly. Please run firebase login to authenticate the CLI. 
[info] i  emulators: Starting emulators: functions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: functions"}}
[info] i  emulators: Detected demo project ID "demo-arabic-stories", emulated services will use a demo configuration and attempts to access non-emulated services for this project will fail. {"metadata":{"emulator":{"name":"hub"},"message":"Detected demo project ID \"demo-arabic-stories\", emulated services will use a demo configuration and attempts to access non-emulated services for this project will fail."}}
[debug] [2026-02-28T21:48:12.456Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2026-02-28T21:48:12.456Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4001},{"address":"::1","family":"IPv6","port":4001}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2026-02-28T21:48:12.458Z] [hub] writing locator at /var/folders/0x/bzy0jkxs69vbqrs2yyg7hynr0000gn/T/hub-demo-arabic-stories.json
[debug] [2026-02-28T21:48:12.562Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2026-02-28T21:48:12.562Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2026-02-28T21:48:12.562Z] [tasks] Cloud Tasks Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2026-02-28T21:48:12.562Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4001},{"address":"::1","family":"IPv6","port":4001}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5002}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}],"tasks":[{"address":"127.0.0.1","family":"IPv4","port":9499}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[info] i  ui: downloading ui-v1.14.0.zip... {"metadata":{"emulator":{"name":"ui"},"message":"downloading ui-v1.14.0.zip..."}}
[debug] [2026-02-28T21:48:12.568Z] >>> [apiv2][query] GET https://storage.googleapis.com/firebase-preview-drop/emulator/ui-v1.14.0.zip 
[debug] [2026-02-28T21:48:13.114Z] <<< [apiv2][status] GET https://storage.googleapis.com/firebase-preview-drop/emulator/ui-v1.14.0.zip 200
[debug] [2026-02-28T21:48:13.114Z] <<< [apiv2][body] GET https://storage.googleapis.com/firebase-preview-drop/emulator/ui-v1.14.0.zip [stream]
[debug] [2026-02-28T21:48:15.698Z] Data is 3615311
[debug] [2026-02-28T21:48:15.698Z] [unzip] Entry: client/ (compressed_size=0 bytes, uncompressed_size=0 bytes)
[debug] [2026-02-28T21:48:15.698Z] [unzip] Processing entry: client/
[debug] [2026-02-28T21:48:15.698Z] [unzip] mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/
[debug] [2026-02-28T21:48:15.698Z] [unzip] Entry: client/favicon-16x16.png (compressed_size=293 bytes, uncompressed_size=293 bytes)
[debug] [2026-02-28T21:48:15.698Z] [unzip] Processing entry: client/favicon-16x16.png
[debug] [2026-02-28T21:48:15.698Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client
[debug] [2026-02-28T21:48:15.699Z] [unzip] Writing file: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/favicon-16x16.png
[debug] [2026-02-28T21:48:15.699Z] [unzip] Entry: client/safari-pinned-tab.svg (compressed_size=1433 bytes, uncompressed_size=2611 bytes)
[debug] [2026-02-28T21:48:15.699Z] [unzip] Processing entry: client/safari-pinned-tab.svg
[debug] [2026-02-28T21:48:15.699Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client
[debug] [2026-02-28T21:48:15.699Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/safari-pinned-tab.svg
[debug] [2026-02-28T21:48:15.703Z] [unzip] Entry: client/favicon.ico (compressed_size=2933 bytes, uncompressed_size=13294 bytes)
[debug] [2026-02-28T21:48:15.703Z] [unzip] Processing entry: client/favicon.ico
[debug] [2026-02-28T21:48:15.703Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client
[debug] [2026-02-28T21:48:15.703Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/favicon.ico
[debug] [2026-02-28T21:48:15.703Z] [unzip] Entry: client/index.html (compressed_size=1363 bytes, uncompressed_size=3071 bytes)
[debug] [2026-02-28T21:48:15.703Z] [unzip] Processing entry: client/index.html
[debug] [2026-02-28T21:48:15.703Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client
[debug] [2026-02-28T21:48:15.704Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/index.html
[debug] [2026-02-28T21:48:15.704Z] [unzip] Entry: client/android-chrome-192x192.png (compressed_size=2684 bytes, uncompressed_size=2684 bytes)
[debug] [2026-02-28T21:48:15.704Z] [unzip] Processing entry: client/android-chrome-192x192.png
[debug] [2026-02-28T21:48:15.704Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client
[debug] [2026-02-28T21:48:15.704Z] [unzip] Writing file: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/android-chrome-192x192.png
[debug] [2026-02-28T21:48:15.704Z] [unzip] Entry: client/apple-touch-icon.png (compressed_size=2123 bytes, uncompressed_size=2152 bytes)
[debug] [2026-02-28T21:48:15.704Z] [unzip] Processing entry: client/apple-touch-icon.png
[debug] [2026-02-28T21:48:15.704Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client
[debug] [2026-02-28T21:48:15.705Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/apple-touch-icon.png
[debug] [2026-02-28T21:48:15.705Z] [unzip] Entry: client/android-chrome-512x512.png (compressed_size=5369 bytes, uncompressed_size=5411 bytes)
[debug] [2026-02-28T21:48:15.705Z] [unzip] Processing entry: client/android-chrome-512x512.png
[debug] [2026-02-28T21:48:15.705Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client
[debug] [2026-02-28T21:48:15.705Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/android-chrome-512x512.png
[debug] [2026-02-28T21:48:15.706Z] [unzip] Entry: client/manifest.json (compressed_size=245 bytes, uncompressed_size=551 bytes)
[debug] [2026-02-28T21:48:15.706Z] [unzip] Processing entry: client/manifest.json
[debug] [2026-02-28T21:48:15.706Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client
[debug] [2026-02-28T21:48:15.706Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/manifest.json
[debug] [2026-02-28T21:48:15.708Z] [unzip] Entry: client/robots.txt (compressed_size=26 bytes, uncompressed_size=26 bytes)
[debug] [2026-02-28T21:48:15.709Z] [unzip] Processing entry: client/robots.txt
[debug] [2026-02-28T21:48:15.709Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client
[debug] [2026-02-28T21:48:15.711Z] [unzip] Writing file: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/robots.txt
[debug] [2026-02-28T21:48:15.714Z] [unzip] Entry: client/mstile-150x150.png (compressed_size=2034 bytes, uncompressed_size=2034 bytes)
[debug] [2026-02-28T21:48:15.714Z] [unzip] Processing entry: client/mstile-150x150.png
[debug] [2026-02-28T21:48:15.714Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client
[debug] [2026-02-28T21:48:15.714Z] [unzip] Writing file: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/mstile-150x150.png
[debug] [2026-02-28T21:48:15.714Z] [unzip] Entry: client/assets/ (compressed_size=0 bytes, uncompressed_size=0 bytes)
[debug] [2026-02-28T21:48:15.714Z] [unzip] Processing entry: client/assets/
[debug] [2026-02-28T21:48:15.714Z] [unzip] mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/
[debug] [2026-02-28T21:48:15.715Z] [unzip] Entry: client/assets/index-ClZTY_JS.js.map (compressed_size=2328270 bytes, uncompressed_size=9947004 bytes)
[debug] [2026-02-28T21:48:15.715Z] [unzip] Processing entry: client/assets/index-ClZTY_JS.js.map
[debug] [2026-02-28T21:48:15.715Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets
[debug] [2026-02-28T21:48:15.715Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/index-ClZTY_JS.js.map
[debug] [2026-02-28T21:48:15.743Z] [unzip] Entry: client/assets/index-ClZTY_JS.js (compressed_size=567195 bytes, uncompressed_size=2035940 bytes)
[debug] [2026-02-28T21:48:15.743Z] [unzip] Processing entry: client/assets/index-ClZTY_JS.js
[debug] [2026-02-28T21:48:15.743Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets
[debug] [2026-02-28T21:48:15.743Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/index-ClZTY_JS.js
[debug] [2026-02-28T21:48:15.751Z] [unzip] Entry: client/assets/index-BdgySamB.css (compressed_size=35979 bytes, uncompressed_size=298654 bytes)
[debug] [2026-02-28T21:48:15.751Z] [unzip] Processing entry: client/assets/index-BdgySamB.css
[debug] [2026-02-28T21:48:15.751Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets
[debug] [2026-02-28T21:48:15.751Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/index-BdgySamB.css
[debug] [2026-02-28T21:48:15.752Z] [unzip] Entry: client/assets/extensions/ (compressed_size=0 bytes, uncompressed_size=0 bytes)
[debug] [2026-02-28T21:48:15.752Z] [unzip] Processing entry: client/assets/extensions/
[debug] [2026-02-28T21:48:15.752Z] [unzip] mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/extensions/
[debug] [2026-02-28T21:48:15.752Z] [unzip] Entry: client/assets/extensions/default-extension.png (compressed_size=1646 bytes, uncompressed_size=1657 bytes)
[debug] [2026-02-28T21:48:15.752Z] [unzip] Processing entry: client/assets/extensions/default-extension.png
[debug] [2026-02-28T21:48:15.752Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/extensions
[debug] [2026-02-28T21:48:15.752Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/extensions/default-extension.png
[debug] [2026-02-28T21:48:15.753Z] [unzip] Entry: client/assets/img/ (compressed_size=0 bytes, uncompressed_size=0 bytes)
[debug] [2026-02-28T21:48:15.753Z] [unzip] Processing entry: client/assets/img/
[debug] [2026-02-28T21:48:15.753Z] [unzip] mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/img/
[debug] [2026-02-28T21:48:15.753Z] [unzip] Entry: client/assets/img/database.png (compressed_size=29449 bytes, uncompressed_size=29988 bytes)
[debug] [2026-02-28T21:48:15.753Z] [unzip] Processing entry: client/assets/img/database.png
[debug] [2026-02-28T21:48:15.753Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/img
[debug] [2026-02-28T21:48:15.753Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/img/database.png
[debug] [2026-02-28T21:48:15.753Z] [unzip] Entry: client/assets/provider-icons/ (compressed_size=0 bytes, uncompressed_size=0 bytes)
[debug] [2026-02-28T21:48:15.753Z] [unzip] Processing entry: client/assets/provider-icons/
[debug] [2026-02-28T21:48:15.753Z] [unzip] mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons/
[debug] [2026-02-28T21:48:15.753Z] [unzip] Entry: client/assets/provider-icons/auth_service_saml.svg (compressed_size=575 bytes, uncompressed_size=1226 bytes)
[debug] [2026-02-28T21:48:15.753Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_saml.svg
[debug] [2026-02-28T21:48:15.753Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons
[debug] [2026-02-28T21:48:15.753Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons/auth_service_saml.svg
[debug] [2026-02-28T21:48:15.754Z] [unzip] Entry: client/assets/provider-icons/auth_service_phone.svg (compressed_size=261 bytes, uncompressed_size=414 bytes)
[debug] [2026-02-28T21:48:15.754Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_phone.svg
[debug] [2026-02-28T21:48:15.754Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons
[debug] [2026-02-28T21:48:15.754Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons/auth_service_phone.svg
[debug] [2026-02-28T21:48:15.754Z] [unzip] Entry: client/assets/provider-icons/auth_service_facebook.svg (compressed_size=289 bytes, uncompressed_size=457 bytes)
[debug] [2026-02-28T21:48:15.754Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_facebook.svg
[debug] [2026-02-28T21:48:15.754Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons
[debug] [2026-02-28T21:48:15.754Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons/auth_service_facebook.svg
[debug] [2026-02-28T21:48:15.754Z] [unzip] Entry: client/assets/provider-icons/auth_service_game_center.svg (compressed_size=991 bytes, uncompressed_size=3921 bytes)
[debug] [2026-02-28T21:48:15.754Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_game_center.svg
[debug] [2026-02-28T21:48:15.754Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons
[debug] [2026-02-28T21:48:15.754Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons/auth_service_game_center.svg
[debug] [2026-02-28T21:48:15.755Z] [unzip] Entry: client/assets/provider-icons/auth_service_apple.svg (compressed_size=230 bytes, uncompressed_size=334 bytes)
[debug] [2026-02-28T21:48:15.755Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_apple.svg
[debug] [2026-02-28T21:48:15.755Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons
[debug] [2026-02-28T21:48:15.755Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons/auth_service_apple.svg
[debug] [2026-02-28T21:48:15.755Z] [unzip] Entry: client/assets/provider-icons/auth_service_github.svg (compressed_size=466 bytes, uncompressed_size=838 bytes)
[debug] [2026-02-28T21:48:15.755Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_github.svg
[debug] [2026-02-28T21:48:15.755Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons
[debug] [2026-02-28T21:48:15.755Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons/auth_service_github.svg
[debug] [2026-02-28T21:48:15.755Z] [unzip] Entry: client/assets/provider-icons/auth_service_mslive.svg (compressed_size=203 bytes, uncompressed_size=378 bytes)
[debug] [2026-02-28T21:48:15.755Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_mslive.svg
[debug] [2026-02-28T21:48:15.755Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons
[debug] [2026-02-28T21:48:15.755Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons/auth_service_mslive.svg
[debug] [2026-02-28T21:48:15.756Z] [unzip] Entry: client/assets/provider-icons/auth_service_yahoo.svg (compressed_size=577 bytes, uncompressed_size=1182 bytes)
[debug] [2026-02-28T21:48:15.756Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_yahoo.svg
[debug] [2026-02-28T21:48:15.756Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons
[debug] [2026-02-28T21:48:15.756Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons/auth_service_yahoo.svg
[debug] [2026-02-28T21:48:15.756Z] [unzip] Entry: client/assets/provider-icons/auth_service_twitter.svg (compressed_size=444 bytes, uncompressed_size=751 bytes)
[debug] [2026-02-28T21:48:15.756Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_twitter.svg
[debug] [2026-02-28T21:48:15.756Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons
[debug] [2026-02-28T21:48:15.756Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons/auth_service_twitter.svg
[debug] [2026-02-28T21:48:15.756Z] [unzip] Entry: client/assets/provider-icons/auth_service_play_games.svg (compressed_size=565 bytes, uncompressed_size=1173 bytes)
[debug] [2026-02-28T21:48:15.756Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_play_games.svg
[debug] [2026-02-28T21:48:15.756Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons
[debug] [2026-02-28T21:48:15.756Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons/auth_service_play_games.svg
[debug] [2026-02-28T21:48:15.756Z] [unzip] Entry: client/assets/provider-icons/auth_service_email.svg (compressed_size=228 bytes, uncompressed_size=326 bytes)
[debug] [2026-02-28T21:48:15.756Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_email.svg
[debug] [2026-02-28T21:48:15.756Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons
[debug] [2026-02-28T21:48:15.756Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons/auth_service_email.svg
[debug] [2026-02-28T21:48:15.757Z] [unzip] Entry: client/assets/provider-icons/auth_service_google.svg (compressed_size=409 bytes, uncompressed_size=720 bytes)
[debug] [2026-02-28T21:48:15.757Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_google.svg
[debug] [2026-02-28T21:48:15.757Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons
[debug] [2026-02-28T21:48:15.757Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons/auth_service_google.svg
[debug] [2026-02-28T21:48:15.757Z] [unzip] Entry: client/assets/provider-icons/auth_service_oidc.svg (compressed_size=414 bytes, uncompressed_size=858 bytes)
[debug] [2026-02-28T21:48:15.757Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_oidc.svg
[debug] [2026-02-28T21:48:15.757Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons
[debug] [2026-02-28T21:48:15.757Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/assets/provider-icons/auth_service_oidc.svg
[debug] [2026-02-28T21:48:15.757Z] [unzip] Entry: client/browserconfig.xml (compressed_size=491 bytes, uncompressed_size=822 bytes)
[debug] [2026-02-28T21:48:15.757Z] [unzip] Processing entry: client/browserconfig.xml
[debug] [2026-02-28T21:48:15.757Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client
[debug] [2026-02-28T21:48:15.757Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/browserconfig.xml
[debug] [2026-02-28T21:48:15.757Z] [unzip] Entry: client/favicon-32x32.png (compressed_size=475 bytes, uncompressed_size=475 bytes)
[debug] [2026-02-28T21:48:15.757Z] [unzip] Processing entry: client/favicon-32x32.png
[debug] [2026-02-28T21:48:15.757Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client
[debug] [2026-02-28T21:48:15.757Z] [unzip] Writing file: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/client/favicon-32x32.png
[debug] [2026-02-28T21:48:15.757Z] [unzip] Entry: server/ (compressed_size=0 bytes, uncompressed_size=0 bytes)
[debug] [2026-02-28T21:48:15.757Z] [unzip] Processing entry: server/
[debug] [2026-02-28T21:48:15.758Z] [unzip] mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/server/
[debug] [2026-02-28T21:48:15.758Z] [unzip] Entry: server/server.mjs.map (compressed_size=296496 bytes, uncompressed_size=1355667 bytes)
[debug] [2026-02-28T21:48:15.758Z] [unzip] Processing entry: server/server.mjs.map
[debug] [2026-02-28T21:48:15.758Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/server
[debug] [2026-02-28T21:48:15.758Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/server/server.mjs.map
[debug] [2026-02-28T21:48:15.760Z] [unzip] Entry: server/server.mjs (compressed_size=315701 bytes, uncompressed_size=1172682 bytes)
[debug] [2026-02-28T21:48:15.760Z] [unzip] Processing entry: server/server.mjs
[debug] [2026-02-28T21:48:15.760Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/server
[debug] [2026-02-28T21:48:15.760Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/server/server.mjs
[debug] [2026-02-28T21:48:15.763Z] [unzip] Entry: server/assets/ (compressed_size=0 bytes, uncompressed_size=0 bytes)
[debug] [2026-02-28T21:48:15.763Z] [unzip] Processing entry: server/assets/
[debug] [2026-02-28T21:48:15.763Z] [unzip] mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/server/assets/
[debug] [2026-02-28T21:48:15.763Z] [unzip] Entry: server/assets/multipart-parser-DGCUZdXu.mjs.map (compressed_size=4791 bytes, uncompressed_size=17918 bytes)
[debug] [2026-02-28T21:48:15.763Z] [unzip] Processing entry: server/assets/multipart-parser-DGCUZdXu.mjs.map
[debug] [2026-02-28T21:48:15.763Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/server/assets
[debug] [2026-02-28T21:48:15.763Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/server/assets/multipart-parser-DGCUZdXu.mjs.map
[debug] [2026-02-28T21:48:15.764Z] [unzip] Entry: server/assets/multipart-parser-DGCUZdXu.mjs (compressed_size=2621 bytes, uncompressed_size=10390 bytes)
[debug] [2026-02-28T21:48:15.764Z] [unzip] Processing entry: server/assets/multipart-parser-DGCUZdXu.mjs
[debug] [2026-02-28T21:48:15.764Z] [unzip] else mkdir: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/server/assets
[debug] [2026-02-28T21:48:15.764Z] [unzip] deflating: /Users/murad/.cache/firebase/emulators/ui-v1.14.0/server/assets/multipart-parser-DGCUZdXu.mjs
[info] i  ui: Removing outdated emulator files: ui-v1.15.0 {"metadata":{"emulator":{"name":"ui"},"message":"Removing outdated emulator files: ui-v1.15.0"}}
[info] i  ui: Removing outdated emulator files: ui-v1.15.0.zip {"metadata":{"emulator":{"name":"ui"},"message":"Removing outdated emulator files: ui-v1.15.0.zip"}}
[info] i  functions: Watching "/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions\" for Cloud Functions..."}}
[debug] [2026-02-28T21:48:15.770Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-28T21:48:16.150Z] > [functions] package.json contents: {
  "name": "arabic-stories-api",
  "version": "1.0.0",
  "description": "Firebase Functions for Arabic Stories - Completions API",
  "main": "index.js",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "dependencies": {
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0",
    "express": "^4.18.2",
    "cors": "^2.8.5",
    "nodemailer": "^6.9.7"
  },
  "devDependencies": {
    "firebase-tools": "^13.0.0"
  },
  "private": true
}
[debug] [2026-02-28T21:48:16.150Z] Building nodejs source
[debug] [2026-02-28T21:48:16.151Z] Failed to find version of module node: reached end of search path /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "24". Using node@24 from host. 
[debug] [2026-02-28T21:48:16.151Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-28T21:48:16.154Z] Found firebase-functions binary at '/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8422

[debug] [2026-02-28T21:48:16.371Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[info] ✔  functions[us-central1-api]: http function initialized (http://127.0.0.1:5002/demo-arabic-stories/us-central1/api). {"metadata":{"emulator":{"name":"functions"},"message":"http function initialized (http://127.0.0.1:5002/demo-arabic-stories/us-central1/api)."}}
[debug] [2026-02-28T21:48:20.403Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4001/               │
└─────────────────────────────────────────────────────────────┘

┌───────────┬────────────────┬─────────────────────────────────┐
│ Emulator  │ Host:Port      │ View in Emulator UI             │
├───────────┼────────────────┼─────────────────────────────────┤
│ Functions │ 127.0.0.1:5002 │ http://127.0.0.1:4001/functions │
└───────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub host: 127.0.0.1 port: 4400
  Other reserved ports: 4500

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2026-02-28T21:48:21.527Z] [work-queue] {"queuedWork":["/demo-arabic-stories/us-central1/api/-2026-02-28T21:48:21.527Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2026-02-28T21:48:21.527Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/demo-arabic-stories/us-central1/api/-2026-02-28T21:48:21.527Z"],"workRunningCount":1}
[debug] [2026-02-28T21:48:21.527Z] Accepted request GET /demo-arabic-stories/us-central1/api/ --> us-central1-api
[debug] [2026-02-28T21:48:21.528Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2026-02-28T21:48:21.528Z] [functions] Got req.url=/demo-arabic-stories/us-central1/api/, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/demo-arabic-stories/us-central1/api/, mapping to path=/"}}
[debug] [2026-02-28T21:48:21.531Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2026-02-28T21:48:21.531Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:86415) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:86415) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  (node:86415) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2026-02-28T21:48:21.845Z] [runtime-status] [86415] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [86415] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2026-02-28T21:48:21.845Z] [runtime-status] [86415] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.1.1","resolution":"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [86415] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.1.1\",\"resolution\":\"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2026-02-28T21:48:21.845Z] [runtime-status] [86415] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [86415] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2026-02-28T21:48:21.845Z] [runtime-status] [86415] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.1.1","resolution":"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [86415] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.1.1\",\"resolution\":\"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2026-02-28T21:48:21.899Z] [runtime-status] [86415] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [86415] Checked functions.config() {\"config\":{}}"}}
[debug] [2026-02-28T21:48:21.899Z] [runtime-status] [86415] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.1.1","resolution":"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [86415] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.1.1\",\"resolution\":\"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2026-02-28T21:48:21.899Z] [runtime-status] [86415] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.1.1","resolution":"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [86415] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.1.1\",\"resolution\":\"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2026-02-28T21:48:21.899Z] [runtime-status] [86415] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [86415] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2026-02-28T21:48:21.901Z] [runtime-status] [86415] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.1.1","resolution":"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [86415] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.1.1\",\"resolution\":\"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2026-02-28T21:48:21.901Z] [runtime-status] [86415] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [86415] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2026-02-28T21:48:21.912Z] [runtime-status] [86415] Functions runtime initialized. {"cwd":"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions","node_version":"24.13.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [86415] Functions runtime initialized. {\"cwd\":\"/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions\",\"node_version\":\"24.13.1\"}"}}
[debug] [2026-02-28T21:48:21.912Z] [runtime-status] [86415] Listening to port: /var/folders/0x/bzy0jkxs69vbqrs2yyg7hynr0000gn/T/fire_emu_f4f6975fe1063b54.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [86415] Listening to port: /var/folders/0x/bzy0jkxs69vbqrs2yyg7hynr0000gn/T/fire_emu_f4f6975fe1063b54.sock"}}
[debug] [2026-02-28T21:48:21.940Z] [worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: IDLE"}}
[debug] [2026-02-28T21:48:21.940Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2026-02-28T21:48:21.940Z] [worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: BUSY"}}
[debug] [2026-02-28T21:48:21.943Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2.313542ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2.313542ms"}}
[debug] [2026-02-28T21:48:21.943Z] [worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: IDLE"}}
[debug] [2026-02-28T21:48:21.943Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2026-02-28T21:48:21.943Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2026-02-28T21:48:21.943Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2026-02-28T21:48:21.951Z] [work-queue] {"queuedWork":["/demo-arabic-stories/us-central1/api/completions/story-2026-02-28T21:48:21.951Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2026-02-28T21:48:21.951Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/demo-arabic-stories/us-central1/api/completions/story-2026-02-28T21:48:21.951Z"],"workRunningCount":1}
[debug] [2026-02-28T21:48:21.951Z] Accepted request POST /demo-arabic-stories/us-central1/api/completions/story --> us-central1-api
[debug] [2026-02-28T21:48:21.951Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2026-02-28T21:48:21.951Z] [functions] Got req.url=/demo-arabic-stories/us-central1/api/completions/story, mapping to path=/completions/story {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/demo-arabic-stories/us-central1/api/completions/story, mapping to path=/completions/story"}}
[debug] [2026-02-28T21:48:21.951Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2026-02-28T21:48:21.951Z] [worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: BUSY"}}
[debug] [2026-02-28T21:48:25.671Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 3720.555875ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 3720.555875ms"}}
[debug] [2026-02-28T21:48:25.672Z] [worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: IDLE"}}
[debug] [2026-02-28T21:48:25.672Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2026-02-28T21:48:25.672Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2026-02-28T21:48:25.672Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2026-02-28T21:48:34.373Z] [work-queue] {"queuedWork":["/demo-arabic-stories/us-central1/api/completions/story-2026-02-28T21:48:34.373Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2026-02-28T21:48:34.373Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/demo-arabic-stories/us-central1/api/completions/story-2026-02-28T21:48:34.373Z"],"workRunningCount":1}
[debug] [2026-02-28T21:48:34.373Z] Accepted request POST /demo-arabic-stories/us-central1/api/completions/story --> us-central1-api
[debug] [2026-02-28T21:48:34.373Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2026-02-28T21:48:34.374Z] [functions] Got req.url=/demo-arabic-stories/us-central1/api/completions/story, mapping to path=/completions/story {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/demo-arabic-stories/us-central1/api/completions/story, mapping to path=/completions/story"}}
[debug] [2026-02-28T21:48:34.374Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2026-02-28T21:48:34.374Z] [worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: BUSY"}}
[debug] [2026-02-28T21:48:38.785Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 4411.526958ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 4411.526958ms"}}
[debug] [2026-02-28T21:48:38.786Z] [worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: IDLE"}}
[debug] [2026-02-28T21:48:38.787Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2026-02-28T21:48:38.787Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2026-02-28T21:48:38.787Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2026-02-28T21:48:57.989Z] [work-queue] {"queuedWork":["/demo-arabic-stories/us-central1/api-2026-02-28T21:48:57.989Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2026-02-28T21:48:57.990Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/demo-arabic-stories/us-central1/api-2026-02-28T21:48:57.989Z"],"workRunningCount":1}
[debug] [2026-02-28T21:48:57.990Z] Accepted request GET /demo-arabic-stories/us-central1/api --> us-central1-api
[debug] [2026-02-28T21:48:57.991Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2026-02-28T21:48:57.991Z] [functions] Got req.url=/demo-arabic-stories/us-central1/api, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/demo-arabic-stories/us-central1/api, mapping to path=/"}}
[debug] [2026-02-28T21:48:57.991Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2026-02-28T21:48:57.992Z] [worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: BUSY"}}
[debug] [2026-02-28T21:48:58.003Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 11.323708ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 11.323708ms"}}
[debug] [2026-02-28T21:48:58.004Z] [worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: IDLE"}}
[debug] [2026-02-28T21:48:58.004Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2026-02-28T21:48:58.004Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2026-02-28T21:48:58.004Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2026-02-28T21:48:59.610Z] Functions emulator received unknown request at path /favicon.ico
[debug] [2026-02-28T21:49:28.011Z] [work-queue] {"queuedWork":["/demo-arabic-stories/us-central1/api-2026-02-28T21:49:28.010Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2026-02-28T21:49:28.013Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/demo-arabic-stories/us-central1/api-2026-02-28T21:49:28.010Z"],"workRunningCount":1}
[debug] [2026-02-28T21:49:28.013Z] Accepted request GET /demo-arabic-stories/us-central1/api --> us-central1-api
[debug] [2026-02-28T21:49:28.014Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2026-02-28T21:49:28.015Z] [functions] Got req.url=/demo-arabic-stories/us-central1/api, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/demo-arabic-stories/us-central1/api, mapping to path=/"}}
[debug] [2026-02-28T21:49:28.015Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2026-02-28T21:49:28.016Z] [worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: BUSY"}}
[debug] [2026-02-28T21:49:28.025Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 8.505875ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 8.505875ms"}}
[debug] [2026-02-28T21:49:28.025Z] [worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: IDLE"}}
[debug] [2026-02-28T21:49:28.025Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2026-02-28T21:49:28.025Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2026-02-28T21:49:28.025Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2026-02-28T21:49:31.409Z] [work-queue] {"queuedWork":["/demo-arabic-stories/us-central1/api/d-2026-02-28T21:49:31.409Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2026-02-28T21:49:31.410Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/demo-arabic-stories/us-central1/api/d-2026-02-28T21:49:31.409Z"],"workRunningCount":1}
[debug] [2026-02-28T21:49:31.410Z] Accepted request GET /demo-arabic-stories/us-central1/api/d --> us-central1-api
[debug] [2026-02-28T21:49:31.410Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2026-02-28T21:49:31.411Z] [functions] Got req.url=/demo-arabic-stories/us-central1/api/d, mapping to path=/d {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/demo-arabic-stories/us-central1/api/d, mapping to path=/d"}}
[debug] [2026-02-28T21:49:31.411Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2026-02-28T21:49:31.412Z] [worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: BUSY"}}
[debug] [2026-02-28T21:49:31.416Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 3.632167ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 3.632167ms"}}
[debug] [2026-02-28T21:49:31.416Z] [worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: IDLE"}}
[debug] [2026-02-28T21:49:31.416Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2026-02-28T21:49:31.416Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2026-02-28T21:49:31.416Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2026-02-28T22:50:16.163Z] File /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js changed, reloading triggers"}}
[debug] [2026-02-28T22:50:17.199Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-28T22:50:18.400Z] > [functions] package.json contents: {
  "name": "arabic-stories-api",
  "version": "1.0.0",
  "description": "Firebase Functions for Arabic Stories - Completions API",
  "main": "index.js",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "dependencies": {
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0",
    "express": "^4.18.2",
    "cors": "^2.8.5",
    "nodemailer": "^6.9.7"
  },
  "devDependencies": {
    "firebase-tools": "^13.0.0"
  },
  "private": true
}
[debug] [2026-02-28T22:50:18.401Z] Building nodejs source
[debug] [2026-02-28T22:50:18.403Z] Failed to find version of module node: reached end of search path /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "24". Using node@24 from host. 
[debug] [2026-02-28T22:50:18.413Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-28T22:50:18.421Z] Found firebase-functions binary at '/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8146

[error] Error: Cannot find module '@google-cloud/text-to-speech'
Require stack:
- /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js
- /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/runtime/loader.js
- /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/bin/firebase-functions.js
    at Module._resolveFilename (node:internal/modules/cjs/loader:1448:15)
    at defaultResolveImpl (node:internal/modules/cjs/loader:1059:19)
    at resolveForCJSWithHooks (node:internal/modules/cjs/loader:1064:22)
    at Module._load (node:internal/modules/cjs/loader:1234:25)
    at TracingChannel.traceSync (node:diagnostics_channel:328:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:245:24)
    at Module.require (node:internal/modules/cjs/loader:1548:12)
    at require (node:internal/modules/helpers:152:16)
    at Object.<anonymous> (/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js:4:32)
    at Module._compile (node:internal/modules/cjs/loader:1804:14) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js',
    '/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/runtime/loader.js',
    '/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/bin/firebase-functions.js'
  ]
}

[debug] [2026-02-28T22:50:18.847Z] Got response code 400; body Failed to generate manifest from function source: Error: Cannot find module '@google-cloud/text-to-speech'
Require stack:
- /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js
- /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/runtime/loader.js
- /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/bin/firebase-functions.js
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-28T22:50:33.984Z] File /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/package.json changed, reloading triggers"}}
[debug] [2026-02-28T22:50:34.987Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-28T22:50:35.492Z] > [functions] package.json contents: {
  "name": "hifz-api",
  "version": "1.0.0",
  "description": "Firebase Functions for Hifz TTS",
  "main": "index.js",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "dependencies": {
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0",
    "express": "^4.18.2",
    "cors": "^2.8.5",
    "@google-cloud/text-to-speech": "^5.0.0"
  },
  "devDependencies": {
    "firebase-tools": "^13.0.0"
  },
  "private": true
}
[debug] [2026-02-28T22:50:35.492Z] Building nodejs source
[debug] [2026-02-28T22:50:35.492Z] Failed to find version of module node: reached end of search path /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "24". Using node@24 from host. 
[debug] [2026-02-28T22:50:35.493Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-28T22:50:35.494Z] Found firebase-functions binary at '/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8307

[error] Error: Cannot find module '@google-cloud/text-to-speech'
Require stack:
- /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js
- /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/runtime/loader.js
- /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/bin/firebase-functions.js
    at Module._resolveFilename (node:internal/modules/cjs/loader:1448:15)
    at defaultResolveImpl (node:internal/modules/cjs/loader:1059:19)
    at resolveForCJSWithHooks (node:internal/modules/cjs/loader:1064:22)
    at Module._load (node:internal/modules/cjs/loader:1234:25)
    at TracingChannel.traceSync (node:diagnostics_channel:328:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:245:24)
    at Module.require (node:internal/modules/cjs/loader:1548:12)
    at require (node:internal/modules/helpers:152:16)
    at Object.<anonymous> (/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js:4:32)
    at Module._compile (node:internal/modules/cjs/loader:1804:14) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js',
    '/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/runtime/loader.js',
    '/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/bin/firebase-functions.js'
  ]
}

[debug] [2026-02-28T22:50:35.743Z] Got response code 400; body Failed to generate manifest from function source: Error: Cannot find module '@google-cloud/text-to-speech'
Require stack:
- /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js
- /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/runtime/loader.js
- /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/firebase-functions/lib/bin/firebase-functions.js
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-28T22:51:46.400Z] File /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/package-lock.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/package-lock.json changed, reloading triggers"}}
[debug] [2026-02-28T22:51:47.403Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-28T22:51:47.779Z] > [functions] package.json contents: {
  "name": "hifz-api",
  "version": "1.0.0",
  "description": "Firebase Functions for Hifz TTS",
  "main": "index.js",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "dependencies": {
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0",
    "express": "^4.18.2",
    "cors": "^2.8.5",
    "@google-cloud/text-to-speech": "^5.0.0"
  },
  "devDependencies": {
    "firebase-tools": "^13.0.0"
  },
  "private": true
}
[debug] [2026-02-28T22:51:47.779Z] Building nodejs source
[debug] [2026-02-28T22:51:47.779Z] Failed to find version of module node: reached end of search path /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "24". Using node@24 from host. 
[debug] [2026-02-28T22:51:47.780Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-28T22:51:47.781Z] Found firebase-functions binary at '/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8923

[error] (node:90325) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2026-02-28T22:51:48.229Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2026-02-28T22:51:52.246Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2026-02-28T22:51:52.246Z] [worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: FINISHING"}}
[debug] [2026-02-28T22:51:52.250Z] [worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: exited"}}
[debug] [2026-02-28T22:51:52.250Z] [worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57d687ac-e575-4ac9-b672-6cb54717a96f]: FINISHED"}}
[debug] [2026-02-28T22:55:56.481Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T22:56:10.707Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T22:56:16.224Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T22:57:24.049Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T22:57:26.619Z] File /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js changed, reloading triggers"}}
[debug] [2026-02-28T22:57:27.623Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-28T22:57:28.428Z] > [functions] package.json contents: {
  "name": "hifz-api",
  "version": "1.0.0",
  "description": "Firebase Functions for Hifz TTS",
  "main": "index.js",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "dependencies": {
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0",
    "express": "^4.18.2",
    "cors": "^2.8.5",
    "@google-cloud/text-to-speech": "^5.0.0"
  },
  "devDependencies": {
    "firebase-tools": "^13.0.0"
  },
  "private": true
}
[debug] [2026-02-28T22:57:28.428Z] Building nodejs source
[debug] [2026-02-28T22:57:28.428Z] Failed to find version of module node: reached end of search path /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "24". Using node@24 from host. 
[debug] [2026-02-28T22:57:28.428Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-28T22:57:28.429Z] Found firebase-functions binary at '/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8755

[error] (node:90426) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2026-02-28T22:57:28.877Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2026-02-28T22:57:35.221Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:00:10.220Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:00:16.060Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:00:20.939Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:00:24.194Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:00:40.277Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:01:55.239Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:03:10.109Z] File /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js changed, reloading triggers"}}
[debug] [2026-02-28T23:03:11.119Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-28T23:03:11.831Z] > [functions] package.json contents: {
  "name": "hifz-api",
  "version": "1.0.0",
  "description": "Firebase Functions for Hifz TTS",
  "main": "index.js",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "dependencies": {
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0",
    "express": "^4.18.2",
    "cors": "^2.8.5",
    "@google-cloud/text-to-speech": "^5.0.0"
  },
  "devDependencies": {
    "firebase-tools": "^13.0.0"
  },
  "private": true
}
[debug] [2026-02-28T23:03:11.831Z] Building nodejs source
[debug] [2026-02-28T23:03:11.831Z] Failed to find version of module node: reached end of search path /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "24". Using node@24 from host. 
[debug] [2026-02-28T23:03:11.835Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-28T23:03:11.836Z] Found firebase-functions binary at '/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8685

[error] (node:90574) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2026-02-28T23:03:13.302Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2026-02-28T23:03:21.155Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:05:07.128Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:05:14.626Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:05:18.475Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:07:58.733Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:08:12.413Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:08:15.260Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:08:20.090Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:11:49.573Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:15:08.492Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:15:43.863Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:15:47.198Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:15:55.279Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:16:13.067Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:16:16.178Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:16:20.880Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:16:23.531Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:17:08.678Z] File /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js changed, reloading triggers"}}
[debug] [2026-02-28T23:17:09.683Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-28T23:17:10.247Z] > [functions] package.json contents: {
  "name": "hifz-api",
  "version": "1.0.0",
  "description": "Firebase Functions for Hifz TTS",
  "main": "index.js",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "dependencies": {
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0",
    "express": "^4.18.2",
    "cors": "^2.8.5",
    "@google-cloud/text-to-speech": "^5.0.0"
  },
  "devDependencies": {
    "firebase-tools": "^13.0.0"
  },
  "private": true
}
[debug] [2026-02-28T23:17:10.247Z] Building nodejs source
[debug] [2026-02-28T23:17:10.248Z] Failed to find version of module node: reached end of search path /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "24". Using node@24 from host. 
[debug] [2026-02-28T23:17:10.249Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-28T23:17:10.251Z] Found firebase-functions binary at '/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8722

[info] TTS Client initialized successfully

[error] (node:91050) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2026-02-28T23:17:10.692Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2026-02-28T23:17:18.431Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:17:26.129Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:23:40.598Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:23:57.773Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:23:57.774Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:25:00.874Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:25:00.878Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:25:26.770Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:25:55.861Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:25:55.865Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:26:29.378Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:26:29.379Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:28:22.115Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:28:22.121Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:28:33.653Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:28:33.654Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:28:41.506Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:28:41.509Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:29:04.579Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:29:04.582Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:29:08.887Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:29:44.428Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:29:44.433Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:30:08.705Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api
[debug] [2026-02-28T23:31:20.233Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:31:20.239Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:32:06.231Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:32:06.232Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:32:11.712Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:32:11.713Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:32:23.603Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:32:51.791Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:32:51.795Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:33:31.607Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:33:31.608Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:33:47.483Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:34:22.630Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:34:22.631Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/
[debug] [2026-02-28T23:34:26.323Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:36:31.235Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:45:21.026Z] File /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js changed, reloading triggers"}}
[debug] [2026-02-28T23:45:22.032Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-28T23:45:22.966Z] > [functions] package.json contents: {
  "name": "hifz-api",
  "version": "1.0.0",
  "description": "Firebase Functions for Hifz TTS",
  "main": "index.js",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "dependencies": {
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0",
    "express": "^4.18.2",
    "cors": "^2.8.5",
    "@google-cloud/text-to-speech": "^5.0.0"
  },
  "devDependencies": {
    "firebase-tools": "^13.0.0"
  },
  "private": true
}
[debug] [2026-02-28T23:45:22.966Z] Building nodejs source
[debug] [2026-02-28T23:45:22.967Z] Failed to find version of module node: reached end of search path /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "24". Using node@24 from host. 
[debug] [2026-02-28T23:45:22.967Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-28T23:45:22.968Z] Found firebase-functions binary at '/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8168

[info] TTS Client initialized successfully

[error] (node:94506) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2026-02-28T23:45:23.442Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2026-02-28T23:46:14.146Z] File /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/index.js changed, reloading triggers"}}
[debug] [2026-02-28T23:46:15.149Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-28T23:46:15.502Z] > [functions] package.json contents: {
  "name": "hifz-api",
  "version": "1.0.0",
  "description": "Firebase Functions for Hifz TTS",
  "main": "index.js",
  "engines": {
    "node": "20"
  },
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "dependencies": {
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0",
    "express": "^4.18.2",
    "cors": "^2.8.5",
    "@google-cloud/text-to-speech": "^5.0.0"
  },
  "devDependencies": {
    "firebase-tools": "^13.0.0"
  },
  "private": true
}
[debug] [2026-02-28T23:46:15.502Z] Building nodejs source
[debug] [2026-02-28T23:46:15.502Z] Failed to find version of module node: reached end of search path /Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "20" doesn't match your global version "24". Using node@24 from host. 
[debug] [2026-02-28T23:46:15.502Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-28T23:46:15.503Z] Found firebase-functions binary at '/Users/murad/Documents/GitHub/ArabicStories/FirebaseBE/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8394

[info] TTS Client initialized successfully

[error] (node:94532) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2026-02-28T23:46:15.967Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2026-02-28T23:47:20.425Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:47:28.585Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
[debug] [2026-02-28T23:48:39.959Z] Functions emulator received unknown request at path /arabicstories-82611/us-central1/api/tts
